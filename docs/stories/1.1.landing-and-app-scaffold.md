# Story 1.1: Landing and App Scaffold

## Status
In Progress

## Story
**As a** visitor,
**I want** to see a landing page and healthy app baseline,
**so that** I know the service exists and can sign up.

## Acceptance Criteria
1. Public landing page deployed to production with basic brand and CTA.
2. Health endpoint or canary route returns 200 and build info.
3. CI/CD pipeline deploys main to production/staging.

## Tasks / Subtasks
- [x] Scaffold Next.js app baseline (AC: 1)
  - [x] Initialize Next.js App Router with TypeScript in `src/app` per stack. [Source: docs/architecture/tech-stack.md#Tech Stack]
  - [x] Add UI foundation (Tailwind CSS, Radix primitives, optional shadcn) and base layout. [Source: docs/architecture/ui-foundation.md#Stack Decisions]
  - [x] Follow RSC-first conventions; keep client components minimal. [Source: docs/architecture/ui-foundation.md#Conventions]
  - [x] Create example `src/components/ui` and `src/components/patterns` folders. [Source: docs/architecture/ui-foundation.md#Structure (example)]
- [x] Implement public landing route `/` (AC: 1)
  - [x] Create `src/app/page.tsx` with brand, short value prop, and a primary CTA button linking to `/#signup` section on the same page; add a placeholder `#signup` section noting email/password sign-up will be implemented in Story 1.2. [Source: docs/architecture/routes.md#Public]
  - [x] Ensure accessible semantics, keyboard focus states, and WCAG AA contrast. [Source: docs/architecture/ui-foundation.md#Conventions; docs/architecture/performance-accessibility.md#Performance & Accessibility Budgets]
- [x] Add health endpoint returning build info (AC: 2)
  - [x] Create `src/app/api/health/route.ts` that returns 200 with `{ status: 'ok', build: { env: NODE_ENV, deployedAt: ISO8601, commit: <sha-if-available> } }`. [Source: docs/architecture/observability-ops.md#Observability & Ops]
  - [x] Basic integration test to assert 200 and required fields. [Source: docs/architecture/testing-strategy.md#Testing Strategy (High-Level)]
- [ ] CI/CD pipeline and deployment (AC: 3)
  - [x] Add GitHub Actions workflow (`.github/workflows/ci.yml`) to run typecheck, lint (if configured), tests, and `prisma validate` (when Prisma is added). [Source: docs/architecture/observability-ops.md#Observability & Ops]
  - [ ] Configure Vercel to auto-deploy PRs as Preview and `main` to Production; protect production by code review. Ensure Node runtime for webhook routes (later). [Source: docs/architecture/deployment.md#Deployment; docs/architecture/observability-ops.md#Observability & Ops]
  - [ ] Set required environment variables in the Vercel project (at minimum `APP_URL`, optional `SENTRY_DSN`). Keep domain as `chatlink.me` per architecture or use Vercel default until DNS is ready. [Source: docs/architecture/configuration.md#Configuration (ENV); docs/architecture/deployment.md#Deployment]
- [x] Performance and accessibility checks for landing (AC: 1)
  - [x] Keep landing largely server-rendered; minimize client JS on the page. [Source: docs/architecture/performance-accessibility.md#Performance & Accessibility Budgets; docs/architecture/ui-foundation.md#Conventions]
  - [x] Add automated a11y check (axe) to CI for landing. [Source: docs/architecture/ui-foundation.md#Testing]

## Dev Notes
- Previous Story Insights: None (this is the first story in Epic 1).

- Data Models:
  - No data model changes required for landing or health endpoint. [No specific guidance found in architecture docs]

- API Specifications:
  - Public landing route exists at `GET /`. [Source: docs/architecture/routes.md#Public]
  - Health endpoint should return 200 with build info at `/api/health`. Include environment and identifiers when available. [Source: docs/architecture/observability-ops.md#Observability & Ops]

- Component Specifications:
  - Use Tailwind CSS for styling and Radix primitives for accessible UI. Keep components small and composable. [Source: docs/architecture/ui-foundation.md#Stack Decisions; docs/architecture/ui-foundation.md#Conventions]
  - Place shared building blocks in `src/components/ui` and composite patterns in `src/components/patterns`. [Source: docs/architecture/ui-foundation.md#Structure (example)]

- File Locations:
  - `src/app/page.tsx` — landing page (RSC). [Source: docs/architecture/ui-foundation.md#Conventions]
  - `src/app/api/health/route.ts` — health endpoint handler (Node runtime). [Source: docs/architecture/observability-ops.md#Observability & Ops]
  - `src/components/ui/*`, `src/components/patterns/*` — foundational UI. [Source: docs/architecture/ui-foundation.md#Structure (example)]

- Testing Requirements:
  - Unit/integration tests for API health handler; accessibility tests for the landing. [Source: docs/architecture/testing-strategy.md#Testing Strategy (High-Level); docs/architecture/ui-foundation.md#Testing]
  - E2E coverage comes later for critical flows; not required in this story. [Source: docs/architecture/testing-strategy.md#Testing Strategy (High-Level)]

- Technical Constraints:
  - Next.js App Router with TypeScript; RSC by default; keep client JS minimal on landing. [Source: docs/architecture/tech-stack.md#Tech Stack; docs/architecture/ui-foundation.md#Conventions; docs/architecture/performance-accessibility.md#Performance & Accessibility Budgets]
  - Host on Vercel; ensure Node runtime for webhook routes (relevant later). [Source: docs/architecture/deployment.md#Deployment]

- Project Structure Notes:
  - Follow the example structure for components; keep app routes under `src/app`. [Source: docs/architecture/ui-foundation.md#Structure (example)]

## Testing
- Approach: Unit/integration for API health; accessibility checks for landing; defer E2E to later flows. [Source: docs/architecture/testing-strategy.md#Testing Strategy (High-Level); docs/architecture/ui-foundation.md#Testing]
- Key Scenarios:
  - Health endpoint returns 200 with `status` and `build` fields (env, deployedAt, commit when available). [Source: docs/architecture/observability-ops.md#Observability & Ops]
  - Landing renders brand, value prop, and CTA linking to `/#signup`; page passes automated axe checks. [Source: docs/architecture/ui-foundation.md#Testing]
- Success Criteria:
  - LCP on landing < 2.0 s (4G, mid device) and minimal client JS. [Source: docs/architecture/performance-accessibility.md#Performance & Accessibility Budgets]
  - CI pipeline runs on PRs and `main`; Vercel builds Preview for PRs, Production for `main`. [Source: docs/architecture/observability-ops.md#Observability & Ops]

## Change Log
| Date       | Version | Description                          | Author         |
| ---------- | ------- | ------------------------------------ | -------------- |
| 2025-09-13 | 0.1     | Initial draft created from Epic 1.1  | Scrum Master   |

## Dev Agent Record

### Agent Model Used
OpenAI o4-mini via Codex CLI (2025-09-13)

### Debug Log References
- .ai/debug-log.md (not created yet; no issues to log)

### Completion Notes List
- Scaffolded Next.js (App Router, TS) with Tailwind and accessible focus styles.
- Implemented landing at `/` with brand, value prop, primary CTA to `/#signup`, and placeholder signup section.
- Added health endpoint at `/api/health` returning `{ status: 'ok', build: { env, deployedAt, commit } }` with env fallbacks.
- Wrote tests: Vitest integration for health route; axe-core + jsdom a11y smoke test for landing.
- Set up GitHub Actions CI to run typecheck and tests; Prisma validate step is conditional.
- Added minimal `vercel.json` and Node 20 runtime for API functions.
- Created missing architecture docs per devLoadAlwaysFiles: `docs/architecture/source-tree.md`, `docs/architecture/coding-standards.md`.
- Pending: connect Vercel project to enable Preview/Production deploys; set required env vars (`APP_URL`, optional `SENTRY_DSN`).

### File List
package.json
tsconfig.json
next-env.d.ts
next.config.ts
postcss.config.js
tailwind.config.ts
vercel.json
.github/workflows/ci.yml
vitest.config.ts
src/app/globals.css
src/app/layout.tsx
src/app/page.tsx
src/app/api/health/route.ts
src/lib/build-info.ts
src/components/ui/README.md
src/components/patterns/README.md
tests/health.test.ts
tests/a11y/landing.a11y.test.ts
docs/architecture/source-tree.md
docs/architecture/coding-standards.md
